<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂåóÊµ∑ÈÅì 8 Â§© 7 Â§úÊóÖÈÅäÊâãÂÜä - Ê•µÁ∞°Ë≥™ÊÑüÁâà</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&family=Montserrat:wght@700;900&display=swap');
        
        :root {
            --hk-accent: #0ea5e9;
            --hk-bg: #f0f4f8;
            --hk-glass: rgba(255, 255, 255, 0.45);
            --hk-glass-border: rgba(255, 255, 255, 0.6);
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--hk-bg);
            background-image: 
                radial-gradient(at 0% 0%, rgba(14, 165, 233, 0.1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, rgba(139, 92, 246, 0.05) 0, transparent 50%);
            color: #1e293b;
            letter-spacing: -0.01em;
            background-attachment: fixed;
        }

        /* È†ÇÈÉ®Ë£ùÈ£æÂúìÂúà */
        .bg-glow {
            position: fixed;
            top: -10%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(14, 165, 233, 0.15) 0%, transparent 70%);
            z-index: -1;
        }

        /* Êó•ÊúüÂ∞éËà™Ê¥ªÂãïÁãÄÊÖã - Âº∑Âà∂Â≠êÂÖÉÁ¥†ÊñáÂ≠óËÆäÁôΩ */
        .day-active {
            background: #0c4a6e !important; 
            color: #ffffff !important;
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 12px 24px -8px rgba(12, 74, 110, 0.5);
            border: 1px solid rgba(12, 74, 110, 0.1) !important;
        }

        .day-active span {
            color: #ffffff !important;
            opacity: 1 !important;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { 
            -ms-overflow-style: none; 
            scrollbar-width: none; 
            -webkit-overflow-scrolling: touch; 
        }

        /* Âº∑ÂåñÊØõÁéªÁíÉË≥™ÊÑü */
        .glass-card {
            background: var(--hk-glass);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--hk-glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.04);
        }

        .checked-item {
            opacity: 0.4;
            filter: grayscale(0.8);
        }

        .content-collapsed {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .content-expanded {
            max-height: 600px;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .animate-up {
            animation: slideUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .font-montserrat { font-family: 'Montserrat', sans-serif; }
    </style>
</head>
<body class="pb-32">
    <div class="bg-glow"></div>

    <!-- Header Section -->
    <header class="sticky top-0 z-50 transition-all duration-300">
        <div class="glass-card mx-4 mt-4 rounded-[32px] overflow-hidden">
            <div class="px-6 pt-6 pb-2 flex justify-between items-start">
                <div>
                    <h1 class="text-xs font-montserrat font-black text-sky-600 tracking-[0.4em] uppercase">Hokkaido</h1>
                    <div class="flex items-center space-x-2 mt-1">
                        <span class="text-2xl font-black text-slate-800">2026</span>
                        <span class="text-2xl font-light text-slate-300">/</span>
                        <span class="text-2xl font-bold text-slate-800">Spring</span>
                    </div>
                </div>
                <div class="glass-card bg-white/40 rounded-2xl p-3 border border-white/60 text-right shadow-inner">
                    <p class="text-[9px] font-bold text-slate-400 uppercase tracking-tighter">Total Budget</p>
                    <div id="total-budget" class="text-lg font-black text-slate-800 leading-none mt-1">¬• 0</div>
                </div>
            </div>

            <!-- Date Scroller -->
            <div class="px-4 pb-4">
                <div class="flex overflow-x-auto no-scrollbar py-2 space-x-2 items-center flex-nowrap">
                    <!-- PREP Button -->
                    <button onclick="switchView('checklist')" id="btn-checklist" 
                        class="day-btn flex-shrink-0 w-12 h-12 rounded-2xl bg-white/40 border border-white flex flex-col items-center justify-center transition-all duration-300 shadow-sm backdrop-blur-md">
                        <span class="text-lg">üìã</span>
                    </button>
                    
                    <div id="day-buttons-container" class="flex flex-nowrap space-x-2"></div>
                </div>
            </div>

            <!-- Progress Indicator -->
            <div class="w-full bg-slate-200/30 h-[3px]">
                <div id="progress-bar" class="bg-sky-600 h-full transition-all duration-1000 ease-out shadow-[0_0_8px_rgba(14,165,233,0.5)]" style="width: 0%"></div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="content-area" class="px-6 py-8 max-w-lg mx-auto space-y-10">
        <!-- Content injected by JS -->
    </main>

    <!-- Bottom Navigation Bar -->
    <nav class="fixed bottom-6 left-6 right-6 z-50">
        <div class="glass-card rounded-[28px] p-4 flex justify-between items-center shadow-2xl border-white/60">
            <div class="pl-2">
                <p id="bottom-label" class="text-[9px] font-black text-slate-400 uppercase tracking-widest">Today's Total</p>
                <p id="bottom-value" class="text-xl font-black text-slate-800">¬• 0</p>
            </div>
            <div class="flex space-x-2">
                <button onclick="window.scrollTo({top:0, behavior:'smooth'})" class="w-12 h-12 flex items-center justify-center text-slate-400 hover:text-sky-500 transition-colors">
                    <i class="fas fa-arrow-up"></i>
                </button>
                <button onclick="shareItinerary()" class="bg-sky-600 text-white px-6 h-12 rounded-2xl text-xs font-black tracking-widest uppercase shadow-lg shadow-sky-100 active:scale-95 transition-all">
                    Share
                </button>
            </div>
        </div>
    </nav>

    <script>
        const itinerary = [
            { 
                date: "3/26", day: "Day 01", weather: "‚òÅÔ∏è Êõá„Çä 2¬∞C / 8¬∞C", haiku: "Êò•„ÅÆÈõ≤ ÊóÖ„ÅÆÂßã„Åæ„Çä Êú≠Âπå„Å∏",
                hotel: "Êú≠ÂπåÂÖ®Êó•Á©∫ËñÑÈáéÂÅáÊó•ÈÖíÂ∫ó", transport: "JR Âø´ÈÄü + Âú∞ÈêµÂçóÂåóÁ∑ö", 
                activities: [
                    { title: "Êñ∞ÂçÉÊ≠≤Ê©üÂ†¥ÊäµÈÅî", desc: "ÊäµÈÅîÂåóÊµ∑ÈÅìÈñÄÊà∂ÔºåÂª∫Ë≠∞ÂÖàÂà∞ÂúãÂÖßÁ∑öËà™ÂªàÔºåÈÇ£Ë£°ÊúâË±êÂØåÁöÑ‰º¥ÊâãÁ¶ÆËàáRoyceÂ∑ßÂÖãÂäõÂ∑•Âª†ÔºåÊõ¥ÊúâË®±Â§öÈôêÂÆöÁæéÈ£ü„ÄÇ" },
                    { title: "È£ØÂ∫óÂ≠òÊîæË°åÊùé", desc: "ÊäµÈÅîËñÑÈáéÊ†∏ÂøÉÂçÄÂüüÔºåÂÆâÈ†ìÂæåÊ∫ñÂÇôÂ±ïÈñãÊú≠ÂπåÂ∏ÇÂçÄÁöÑÊé¢Á¥¢ÊóÖÁ®ãÔºåÊÑüÂèóÂåóÊñπÂ§ßÂüéÁöÑÊ∞£ÊÅØ„ÄÇ" },
                    { title: "Áã∏Â∞èË∑Ø 1-7 ‰∏ÅÁõÆÊï£Á≠ñ", desc: "Ê©´Ë∑®‰∏ÉÂÄãË°óÂçÄÁöÑÁôæÂπ¥ÂïÜÂ∫óË°óÔºåËó•Â¶ù„ÄÅÈ§êÂª≥„ÄÅ‰º¥ÊâãÁ¶ÆÂ∫óÊûóÁ´ãÔºåÊôö‰∏äÁöÑË°óÈ†≠Ë°®ÊºîÂÖÖÊªøÂú®Âú∞Ê¥ªÂäõ„ÄÇ" }
                ], 
                lunch: "Ê†πÂÆ§Ëä±‰∏∏Â£ΩÂè∏", dinner: "GARAKU ÊπØÂíñÂì©" 
            },
            { 
                date: "3/27", day: "Day 02", weather: "‚òÄÔ∏è Êô¥„Çå 3¬∞C / 10¬∞C", haiku: "Â≠¶„Å≥Ëàé„Å´ Êò•„ÅÆÈôΩÂ∞Ñ„Åó„ÇÑ ÂåóÂ§ßË∑Ø",
                hotel: "Êú≠ÂπåÂÖ®Êó•Á©∫ËñÑÈáéÂÅáÊó•ÈÖíÂ∫ó", transport: "Âú∞ÈêµÂçóÂåóÁ∑ö/Êù±Ë±êÁ∑ö", 
                activities: [
                    { title: "ÂåóÊµ∑ÈÅìÂ§ßÂ≠∏Êº´Ê≠•", desc: "ÊÑüÂèóÊó•Êú¨ÊúÄÁæéÊ†°ÂúíÔºåÊº´Ê≠•ËëóÂêçÁöÑÈäÄÊùèÂ§ßÈÅìËàáÊ≠∑Âè≤ÊÇ†‰πÖÁöÑÊ≠êÈ¢®Âª∫ÁØâÁæ§ÔºåÈ´îÈ©óÂ≠∏Ë°ìÊÆøÂ†ÇÁöÑÂØßÈùú„ÄÇ" },
                    { title: "Ë´èË®™Á•ûÁ§æÂèÉÊãú", desc: "ËëóÂêçÁöÑ„ÄåËä±ÊâãÊ∞¥„ÄçÁ•ûÁ§æÔºåÊ¥óÊâãÊ±†‰∏≠Èã™ÊªøÂ≠£ÁØÄËä±ÂçâÔºåÊòØÊãçÁÖßËàáÁ•àÊ±ÇÂ•ΩÈÅã‰∏çÂèØÈåØÈÅéÁöÑÁÜ±Èªû„ÄÇ" },
                    { title: "Êú≠ÂπåÂï§ÈÖíÂçöÁâ©È§®", desc: "Êó•Êú¨ÂîØ‰∏ÄÁöÑÂï§ÈÖíÂçöÁâ©È§®Ôºå‰∫ÜËß£ÈñãÊãìÂè≤Ôºå‰∏¶ÂèØ‰ª•Âú®ÁµêÊùüÂæåË©¶ÂñùÁï∂Êó•ÊúÄÊñ∞ÈÆÆÁöÑÈñãÊãì‰ΩøÂï§ÈÖí„ÄÇ" }
                ], 
                lunch: "ÂåóÂ§ß‰∏≠Â§ÆÈ£üÂ†Ç", dinner: "Êú≠ÂπåÂï§ÈÖíÂúíÁáíËÇâ" 
            },
            { 
                date: "3/28", day: "Day 03", weather: "‚õÖ Êõá„ÇäÊôÇ„ÄÖÊô¥„Çå 4¬∞C / 9¬∞C", haiku: "Á•à„ÇäÊçß„Åê Èüø„Åè„É°„É≠„Éá„Ç£ Êò•„ÅÆÂÆµ",
                hotel: "Êú≠ÂπåÂÖ®Êó•Á©∫ËñÑÈáéÂÅáÊó•ÈÖíÂ∫ó", transport: "Âú∞ÈêµÊù±Ë•øÁ∑ö + Êù±Ë±êÁ∑ö", 
                activities: [
                    { title: "ÂåóÊµ∑ÈÅìÁ•ûÂÆÆ", desc: "ÂåóÊµ∑ÈÅìÊúÄÂ§ßÁöÑÂÆàË≠∑Á•ûÊÆøÔºåË¢´ÂúìÂ±±ÂéüÂßãÊûóÁí∞ÁπûÔºåÊÑüÂèóËàáÂ∏Ç‰∏≠ÂøÉÊà™ÁÑ∂‰∏çÂêåÁöÑËÇÖÁ©ÜÊ∞õÂúç„ÄÇ" },
                    { title: "ÂúìÂ±±ÂÖ¨Âúí", desc: "Áï∂Âú∞‰∫∫ÊúÄÊÑõÁöÑ‰ºëÊÜ©Â†¥Âú∞ÔºåÈÄ£ÁµêÁ•ûÂÆÆËàáÂãïÁâ©ÂúíÔºå‰∫´ÂèóÂàùÊò•Ê∏ÖÊñ∞ÁöÑÁ©∫Ê∞£ËàáÊ£ÆÊûóËä¨Â§öÁ≤æ„ÄÇ" },
                    { title: "Vaundy ÊºîÂî±ÊúÉ üé∏", desc: "ÊóÖÁ®ãÁöÑÊ†∏ÂøÉÊôÇÂàªÔºÅÊ∫ñÂÇôÂ•ΩÂú®ÈúáÊíºÁöÑÈü≥Â†¥‰∏≠Ëàá Vaundy ‰∏ÄËµ∑Â∫¶ÈÅéÈõ£ÂøòÁöÑÊú≠ÂπåÂ§úÊôö„ÄÇ" }
                ], 
                lunch: "ÁÇ∏Ë±¨Êéí ÁéâËó§", dinner: "‰∏≤È≥•Â±ÖÈÖíÂ±ã" 
            },
            { 
                date: "3/29", day: "Day 04", weather: "‚ùÑÔ∏è Èõ™ 0¬∞C / 5¬∞C", haiku: "Â∞èÊ®ΩË∑Ø„ÇÑ ÈÅãÊ≤≥„Å´Ëàû„ÅÑ„Åó Êò•„ÅÆÈõ™",
                hotel: "Êú≠ÂπåÂÖ®Êó•Á©∫ËñÑÈáéÂÅáÊó•ÈÖíÂ∫ó", transport: "JR Âø´ÈÄü (ÂæÄËøî)", 
                activities: [
                    { title: "Â∞èÊ®ΩÁîúÈªûË°ó", desc: "Êº´Ê≠•Â†∫Áî∫ÈÄöÔºåÂÖ≠Ëä±‰∫≠„ÄÅÂåóËèìÊ®ìÂêçÂ∫óÊûóÁ´ãÔºåÊòØË≥ºË≤∑Á≤æÁ∑ªÁîúÈ£üËàáÊâãÂ∑•ÁéªÁíÉÂ∑•ËóùÁöÑÈ¶ñÈÅ∏Âú∞„ÄÇ" },
                    { title: "Á±îÂçäËïéÈ∫•È∫µ", desc: "Âú®ÂÖÖÊªøÊ≠∑Âè≤ÊÉÖÊá∑ÁöÑÁü≥Á£®È∫µÂ±ã‰∏≠ÔºåÂìÅÂöêÊâãÂ∑•ËïéÈ∫•È∫µÁöÑÁç®ÁâπÈ¶ôÊ∞£ËàáQÂΩàÂöºÂãÅ„ÄÇ" },
                    { title: "Â±±‰∏≠ÁâßÂ†¥ÂÜ∞Ê∑áÊ∑ã", desc: "ÁâßÂ†¥Áõ¥ÈÄÅÁöÑÊ•µËá¥ÁæéÂë≥ÔºÅÁ¥îÁ≤πÁÑ°Ê∑ªÂä†ÁöÑÂ•∂È¶ôÔºåÊòØÂ∞èÊ®ΩÊº´Ê≠•ÊôÇÂøÖÂöêÁöÑÁôÇÁôíÁîúÈªû„ÄÇ" },
                    { title: "Â∞èÊ®ΩÈÅãÊ≤≥Â§úÊôØ", desc: "Áü≥ÈÄ†ÂÄâÂ∫´Áæ§ËàáÁì¶ÊñØÁáàÂÄíÊò†Âú®ÈùúË¨êÁöÑÊ∞¥Èù¢ÔºåÂëàÁèæÂá∫ÂåóÂúãÂÜ¨Â≠£ÁâπÊúâÁöÑÊµ™Êº´ËàáÊá∑ËàäÊÑü„ÄÇ" }
                ], 
                lunch: "ËïéÈ∫•Â±ã Á±îÂçä", dinner: "ÂØ∂Â£ΩÂè∏" 
            },
            { 
                date: "3/30", day: "Day 05", weather: "‚òÅÔ∏è Êõá„Çä 1¬∞C / 7¬∞C", haiku: "ÊπØ„ÅÆÁÖô Âú∞ÁçÑ„ÅÆË∞∑„Å´ Êò•Èúû",
                hotel: "ÁôªÂà•Á¨¨‰∏ÄÁÄßÊú¨È§® ‚ô®Ô∏è", transport: "JR ÁâπÊÄ•ÂåóÊñóËôü + Â∑¥Â£´", 
                activities: [
                    { title: "ÁßªÂãïËá≥ÁôªÂà•", desc: "Êê≠‰πòÁâπÊÄ•ÂâçÂæÄËëóÂêçÁöÑÊ∫´Ê≥â‰πãÈÑâ„ÄÇÁôªÂà•‰ª•Â§öÊ®£ÁöÑÊ≥âË≥™ËÅûÂêçÔºåÊòØÊîæÈ¨ÜË∫´ÂøÉÁöÑÁµï‰Ω≥Á´ôÈªû„ÄÇ" },
                    { title: "Â∞ºÂÖãÊñØÊµ∑Ê¥ãÂÖ¨Âúí", desc: "ËûçÂêàÂåóÊ≠êÂª∫ÁØâÈ¢®Ê†ºÁöÑÊ∞¥ÊóèÈ§®ÔºåÊúÄÂèóÊ≠°ËøéÁöÑ‰æøÊòØÊÜ®ÊÖãÂèØÊé¨ÁöÑ‰ºÅÈµùÈÅäË°å„ÄÇ" },
                    { title: "Á¨¨‰∏ÄÁÄßÊú¨È§®Ê∫´Ê≥â", desc: "ÊìÅÊúâ24Â∞èÊôÇÈñãÊîæÁöÑË∂ÖÂ§ßÊµ¥Â†¥ÔºåÂèØ‰∏ÄÈÇäÊ≥°ÊπØ‰∏ÄÈÇäÁú∫ÊúõÂú∞ÁçÑË∞∑ÁöÑÂ£ØÈóäÈ¢®ÊôØ„ÄÇ" }
                ], 
                lunch: "Ëá™ÁêÜ", dinner: "È£ØÂ∫óË±™ËèØÊôöÂÆ¥" 
            },
            { 
                date: "3/31", day: "Day 06", weather: "‚òÄÔ∏è Âø´Êô¥ 4¬∞C / 11¬∞C", haiku: "Èùí„ÅÑÁ©∫ ÊóÖË∑Ø„ÇíÁÖß„Çâ„Åô Êò•„ÅÆÈ¢®",
                hotel: "Êú≠ÂπåÂÖ®Êó•Á©∫ÁöáÂÜ†ÂÅáÊó•ÈÖíÂ∫ó", transport: "JR ÁâπÊÄ•ÂåóÊñóËôü", 
                activities: [
                    { title: "ÁôªÂà•Ê∫´Ê≥âË°óÊï£Á≠ñ", desc: "ÈÄõÈÄõÊ∫´Ê≥âÂïÜÂ∫óË°óÔºåÊ≤øÈÄîÂ∞ãÊâæÈö±ËóèÂú®ÂêÑËôïÁöÑÈ¨ºÊÄ™Áü≥ÂÉèÔºåÊÑüÂèóÂú∞ÁçÑ‰πãË∞∑ÁöÑÁ•ûÁßòÊ∞õÂúç„ÄÇ" },
                    { title: "ËøîÂõûÊú≠ÂπåÂ∏ÇÂçÄ", desc: "Â∏∂ËëóÊ∫´Ê≥âÂæåÁöÑËàíÁàΩÂøÉÊÉÖËøîÂõûÂ∏Ç‰∏≠ÂøÉÔºåÂÖ•‰ΩèÈù†ËøëËªäÁ´ôÁöÑÈ£ØÂ∫ó‰ª•‰æøÊé°Ë≤∑„ÄÇ" },
                    { title: "Ëá™Áî±Êé°Ë≤∑ÊôÇÈñì", desc: "ÂâçÂæÄÊú≠ÂπåËªäÁ´ôÂë®ÈÇäÁöÑÂ§ßÂûãÁôæË≤®„ÄÅÂú∞‰∏ãË°óÔºå‰∫´ÂèóÊúÄÂæåÂú®ÂåóÊµ∑ÈÅìÁöÑË≥ºË≤®Ê®ÇË∂£„ÄÇ" }
                ], 
                lunch: "Ê∫´Ê≥âË°óÂ∞èÂêÉ", dinner: "ÊãâÈ∫µ‰ø°ÁéÑ" 
            },
            { 
                date: "4/01", day: "Day 07", weather: "üåßÔ∏è Èõ® 5¬∞C / 9¬∞C", haiku: "Èõ®„ÅÆÂçàÂæå „ÉÅ„Éß„Ç≥„ÅÆÈ¶ô„Çä„Å´ Êò•„ÇíÁü•„Çã",
                hotel: "Êú≠ÂπåÂÖ®Êó•Á©∫ÁöáÂÜ†ÂÅáÊó•ÈÖíÂ∫ó", transport: "Âú∞Èêµ + Áõ¥ÈÅîÂ∑¥Â£´", 
                activities: [
                    { title: "ÁôΩËâ≤ÊàÄ‰∫∫ÂÖ¨Âúí", desc: "Â¶ÇÁ´•Ë©±Ëà¨Â§¢ÂπªÁöÑÂ∑ßÂÖãÂäõÂ∑•Âª†ÔºåÈô§‰∫ÜË≥ºË≤∑‰º¥ÊâãÁ¶ÆÔºå‰πüËÉΩÂú®ÂíñÂï°Âª≥‰∫´Áî®ÈôêÂÆöÁîúÈ£ü„ÄÇ" },
                    { 
                        title: "‰∏â‰∫ï Outlet Park ÂåóÂª£Â≥∂", 
                        desc: "ÂåóÊµ∑ÈÅìÊúÄÂ§ßÁöÑ OutletÔºåÂõûÂè∞ÂâçÂøÖÈÄõÁöÑÂìÅÁâåÂåÖÊã¨ÔºöUNITED ARROWS LTD.„ÄÅBEAMS„ÄÅURBAN RESEARCH warehouse„ÄÅLOWRYS FARM„ÄÅGLOBAL WORKÔºåÊõ¥Êúâ THE NORTH FACE„ÄÅNew Balance Factory Store Âèä ASICS FACTORY Á≠âÈÅãÂãïÊà∂Â§ñÂêçÂ∫ó„ÄÇ",
                        extraLink: {
                            label: "ÂÖ®È§®Âú∞ÂúñË≥áË®ä (PDF)",
                            url: "https://mitsui-shopping-park.com/mop/file/filter/sapporo/floor/00009_fo.pdf",
                            icon: "fa-map-marked-alt"
                        }
                    }
                ], 
                lunch: "Outlet ÁæéÈ£üË°ó", dinner: "Ëø¥ËΩâÂ£ΩÂè∏ Toriton" 
            },
            { 
                date: "4/02", day: "Day 08", weather: "‚òÄÔ∏è Êô¥„Çå 6¬∞C / 13¬∞C", haiku: "ÊóÖÁµÇ„Çè„Çä Á©∫Ê∏Ø„Å´Âêπ„Åè Êò•‰∏ÄÁï™",
                hotel: "ÁÑ° (ÂõûÁ®ã)", transport: "JR Âø´ÈÄü Airport Ëôü", 
                activities: [
                    { title: "Á©∫Ê∏ØÊúÄÂæåÊéÉË≤®", desc: "Êñ∞ÂçÉÊ≠≤Á©∫Ê∏ØÂúãÂÖßÁ∑öËà™ÂªàÊòØ‰º¥ÊâãÁ¶ÆÂ§©Â†ÇÔºåË´ãÂãôÂøÖÁïôË∂≥ÊôÇÈñìË≤∑ÈΩäÊúÄÂæåÊ∏ÖÂñÆ„ÄÇ" },
                    { title: "Ë≥¶Ê≠∏ÂõûÂè∞", desc: "Â∏∂ËëóÊªøËºâÁöÑË°åÊùéËàáÂÖÖÂØ¶ÁöÑÂõûÊÜ∂ÔºåÂâçÂæÄÂúãÈöõÁ∑öÁôªÊ©üÔºåÁÇ∫ÈÄôÊÆµÊóÖÁ®ãÁï´‰∏ãÈªû„ÄÇ" }
                ], 
                lunch: "Ë±ö‰∏º‰ø°ÁéÑ (Ê©üÂ†¥Â∫ó)", dinner: "Ê©ü‰∏äÈ§êÈ£ü" 
            }
        ];

        const checklistData = [
            { category: "ÈáçË¶ÅÊñá‰ª∂", items: ["Ë≠∑ÁÖßÊ≠£Êú¨", "Êó•Âπ£ÁèæÈáë / ‰ø°Áî®Âç°", "‰øùÈö™Ë≠âÊòéÊñá‰ª∂", "Vaundy ÊºîÂî±ÊúÉÈñÄÁ•®", "Visit Japan Web QR"] },
            { category: "ÈõªÂ≠êÁî¢ÂìÅ", items: ["Ë°åÂãïÈõªÊ∫ê", "ÂêÑÈ†ÖÂÖÖÈõªÁ∑ö", "Êó•Êú¨ SIM Âç° / WiFi Ê©ü", "Áõ∏Ê©üËàáË®òÊÜ∂Âç°"] },
            { category: "ÂøÖÂÇôË°£Áâ©", items: ["Èò≤È¢®Èò≤Ê∞¥Â§ñÂ•ó", "ÁôºÁÜ±Ë°£/Ë§≤", "ÊâãÂ•ó/ÂúçÂ∑æ", "Èò≤ÊªëÈûã (3ÊúàÂú∞Èù¢‰ªçÊúâÊÆòÂÜ∞)", "ÂÇôÁî®Ë•™Â≠ê"] },
            { category: "ÂÄã‰∫∫Áî®ÂìÅ", items: ["Â∏∏ÂÇôËó•ÂìÅ", "‰øùÊøï‰π≥Ê∂≤/Ë≠∑ÂîáËÜè", "Èõ®ÂÖ∑ (Êë∫ÁñäÂÇò)", "Êë∫ÁñäË≥ºÁâ©Ë¢ã"] }
        ];

        let currentView = 'day';
        let currentDayIdx = 0;
        let expandedActivityIdx = null; 
        let storage = {
            completed: JSON.parse(localStorage.getItem('hokkaido_tasks') || '{}'),
            budget: JSON.parse(localStorage.getItem('hokkaido_budget') || '{}'),
            checklist: JSON.parse(localStorage.getItem('hokkaido_checklist_status') || '{}')
        };

        function init() {
            renderDayButtons();
            renderContent();
            calculateGlobalStats();
        }

        function renderDayButtons() {
            const container = document.getElementById('day-buttons-container');
            container.innerHTML = itinerary.map((d, i) => `
                <button onclick="switchView('day', ${i})" id="btn-day-${i}" 
                    class="day-btn flex-shrink-0 w-12 h-12 rounded-2xl bg-white/40 border border-white flex flex-col items-center justify-center transition-all duration-300 shadow-sm backdrop-blur-md">
                    <span class="text-[8px] font-black text-slate-400 uppercase tracking-tighter">${d.day.split(' ')[1]}</span>
                    <span class="text-sm font-black text-slate-700 leading-none">${d.date.split('/')[1]}</span>
                </button>
            `).join('');
            updateActiveState();
        }

        function switchView(view, idx = 0) {
            currentView = view;
            if (view === 'day') {
                currentDayIdx = idx;
                expandedActivityIdx = null; 
            }
            updateActiveState();
            renderContent();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateActiveState() {
            document.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('day-active'));
            if (currentView === 'checklist') {
                document.getElementById('btn-checklist').classList.add('day-active');
            } else if (document.getElementById(`btn-day-${currentDayIdx}`)) {
                document.getElementById(`btn-day-${currentDayIdx}`).classList.add('day-active');
            }
        }

        function renderContent() {
            if (currentView === 'checklist') renderChecklist();
            else renderDay();
        }

        function toggleActivity(idx) {
            expandedActivityIdx = expandedActivityIdx === idx ? null : idx;
            renderDay();
        }

        function toggleTask(e, taskIdx) {
            e.stopPropagation(); 
            const key = `d${currentDayIdx}-t${taskIdx}`;
            storage.completed[key] = !storage.completed[key];
            localStorage.setItem('hokkaido_tasks', JSON.stringify(storage.completed));
            renderDay();
            calculateGlobalStats();
        }

        function renderDay() {
            const d = itinerary[currentDayIdx];
            const content = document.getElementById('content-area');
            const dailyBudget = storage.budget[currentDayIdx] || "";
            document.getElementById('bottom-label').innerText = "Today's Total";
            document.getElementById('bottom-value').innerText = `¬• ${(dailyBudget || 0).toLocaleString()}`;

            content.innerHTML = `
                <div class="animate-up">
                    <!-- Weather Card -->
                    <div class="glass-card rounded-[32px] p-8 mb-8 relative overflow-hidden">
                        <div class="absolute -right-12 -top-12 w-48 h-48 bg-sky-400/20 rounded-full blur-[80px]"></div>
                        <div class="relative z-10">
                            <p class="text-[9px] font-black text-sky-600 uppercase tracking-[0.3em] mb-2">Weather & Poem</p>
                            <h2 class="text-4xl font-black text-slate-800 tracking-tighter">${d.weather}</h2>
                            <div class="mt-6 flex items-start space-x-3">
                                <div class="w-1 h-6 bg-sky-300 rounded-full"></div>
                                <p class="text-slate-500 font-medium text-sm italic leading-relaxed opacity-90">${d.haiku}</p>
                            </div>
                        </div>
                    </div>

                    <!-- Activities (Accordion) -->
                    <section class="mb-10">
                        <h3 class="text-xs font-black text-slate-400 uppercase tracking-[0.3em] mb-6 pl-2">Daily Itinerary</h3>
                        <div class="space-y-4">
                            ${d.activities.map((act, i) => {
                                const isChecked = storage.completed[`d${currentDayIdx}-t${i}`];
                                const isExpanded = expandedActivityIdx === i;
                                return `
                                    <div class="glass-card rounded-[28px] overflow-hidden transition-all duration-500 ${isExpanded ? 'ring-1 ring-sky-500/30' : ''} ${isChecked ? 'checked-item' : ''}">
                                        <div onclick="toggleActivity(${i})" class="p-6 flex items-center cursor-pointer active:bg-white/50">
                                            <div onclick="toggleTask(event, ${i})" class="w-6 h-6 rounded-full border-2 ${isChecked ? 'bg-slate-800 border-slate-800 shadow-lg' : 'border-white'} flex items-center justify-center mr-4 transition-all">
                                                ${isChecked ? '<i class="fas fa-check text-white text-[9px]"></i>' : ''}
                                            </div>
                                            <span class="flex-1 text-sm font-bold text-slate-800 tracking-tight">${act.title}</span>
                                            <i class="fas fa-plus text-[10px] text-slate-300 transition-transform duration-500 ${isExpanded ? 'rotate-45' : ''}"></i>
                                        </div>
                                        <div class="${isExpanded ? 'content-expanded' : 'content-collapsed'}">
                                            <div class="px-6 pb-6">
                                                <div class="p-5 bg-white/30 backdrop-blur-md rounded-2xl border border-white/40 shadow-inner">
                                                    <p class="text-xs text-slate-500 leading-relaxed mb-5 font-medium">${act.desc}</p>
                                                    <div class="space-y-2">
                                                        ${act.extraLink ? `
                                                            <button onclick="window.open('${act.extraLink.url}', '_blank')" class="w-full bg-slate-800/90 text-white py-3 rounded-xl text-[10px] font-black tracking-widest uppercase border border-white flex items-center justify-center shadow-lg active:scale-95 transition-all">
                                                                <i class="fas ${act.extraLink.icon} mr-2"></i> ${act.extraLink.label}
                                                            </button>
                                                        ` : ''}
                                                        <button onclick="openMap('${act.title}')" class="w-full bg-white/80 backdrop-blur-sm text-slate-800 py-3 rounded-xl text-[10px] font-black tracking-widest uppercase border border-slate-100 flex items-center justify-center shadow-sm active:scale-95 transition-all">
                                                            <i class="fas fa-location-arrow mr-2 text-sky-600"></i> Open Maps
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </section>

                    <!-- Logistics Grid -->
                    <div class="grid grid-cols-2 gap-4 mb-10">
                        <div class="glass-card p-6 rounded-[32px]">
                            <div class="text-indigo-500 mb-2 opacity-70"><i class="fas fa-hotel"></i></div>
                            <p class="text-[8px] text-slate-400 font-black uppercase tracking-widest mb-1">Hotel</p>
                            <p class="text-xs font-bold text-slate-800 leading-tight">${d.hotel}</p>
                        </div>
                        <div class="glass-card p-6 rounded-[32px]">
                            <div class="text-amber-500 mb-2 opacity-70"><i class="fas fa-train"></i></div>
                            <p class="text-[8px] text-slate-400 font-black uppercase tracking-widest mb-1">Transit</p>
                            <p class="text-xs font-bold text-slate-800 leading-tight">${d.transport}</p>
                        </div>
                    </div>

                    <!-- Dining -->
                    <section class="glass-card rounded-[32px] p-6 mb-10">
                        <h3 class="text-xs font-black text-slate-400 uppercase tracking-[0.3em] mb-6 pl-2">Food Finder</h3>
                        <div class="space-y-3">
                            <div onclick="openMap('${d.lunch}')" class="flex items-center justify-between p-4 bg-white/20 rounded-2xl cursor-pointer hover:bg-white/40 transition-all border border-white/60">
                                <span class="text-[9px] font-black text-sky-600/60 uppercase tracking-widest">Lunch</span>
                                <span class="text-sm font-bold text-slate-800">${d.lunch} <i class="fas fa-external-link-alt ml-2 text-[9px] opacity-20"></i></span>
                            </div>
                            <div onclick="openMap('${d.dinner}')" class="flex items-center justify-between p-4 bg-white/40 rounded-2xl cursor-pointer hover:bg-white/40 transition-all border border-white/60">
                                <span class="text-[9px] font-black text-sky-600/60 uppercase tracking-widest">Dinner</span>
                                <span class="text-sm font-bold text-slate-800">${d.dinner} <i class="fas fa-external-link-alt ml-2 text-[9px] opacity-20"></i></span>
                            </div>
                        </div>
                    </section>

                    <!-- Budget Input -->
                    <section class="glass-card rounded-[32px] p-8 mb-12 border-none">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-xs font-black uppercase tracking-widest text-slate-400">Expense Logger</h3>
                            <i class="fas fa-circle-dollar-to-slot text-slate-300 opacity-50"></i>
                        </div>
                        <div class="relative">
                            <span class="absolute left-0 top-1/2 -translate-y-1/2 text-3xl font-light text-slate-300 italic font-montserrat">¬•</span>
                            <input type="number" value="${dailyBudget}" oninput="updateBudget(this.value)" 
                                placeholder="0" 
                                class="w-full bg-transparent border-b border-slate-200/50 py-4 pl-8 text-4xl font-montserrat font-black text-slate-800 focus:border-sky-500 outline-none transition-all placeholder:text-slate-200">
                        </div>
                    </section>
                </div>
            `;
        }

        function renderChecklist() {
            const content = document.getElementById('content-area');
            document.getElementById('bottom-label').innerText = "Progress";
            let total = 0, done = 0;
            checklistData.forEach((cat, cIdx) => {
                cat.items.forEach((_, iIdx) => {
                    total++;
                    if(storage.checklist[`c${cIdx}-i${iIdx}`]) done++;
                });
            });
            const progress = Math.round((done / total) * 100);
            document.getElementById('bottom-value').innerText = `${progress}% Ready`;

            content.innerHTML = `
                <div class="animate-up">
                    <div class="mb-12 text-center">
                        <p class="text-sky-600 font-black text-[10px] tracking-[0.4em] uppercase mb-4">Preparation</p>
                        <h2 class="text-4xl font-black text-slate-800 tracking-tight">Ë°åÂâçÊ∏ÖÂñÆ</h2>
                    </div>
                    ${checklistData.map((cat, cIdx) => `
                        <section class="mb-10">
                            <h3 class="text-slate-400 font-black text-xs uppercase tracking-widest mb-6 border-l-2 border-sky-400 pl-4">${cat.category}</h3>
                            <div class="grid grid-cols-1 gap-3">
                                ${cat.items.map((item, iIdx) => {
                                    const isChecked = storage.checklist[`c${cIdx}-i${iIdx}`];
                                    return `
                                        <div onclick="toggleChecklist(${cIdx}, ${iIdx})" class="glass-card p-5 rounded-[24px] flex items-center cursor-pointer active:scale-[0.98] transition-all">
                                            <div class="w-6 h-6 rounded-full border-2 ${isChecked ? 'bg-slate-800 border-slate-800 shadow-lg' : 'border-white'} flex items-center justify-center mr-4 transition-all">
                                                ${isChecked ? '<i class="fas fa-check text-white text-[9px]"></i>' : ''}
                                            </div>
                                            <span class="text-sm font-bold ${isChecked ? 'checked-item' : 'text-slate-700'}">${item}</span>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </section>
                    `).join('')}
                </div>
            `;
        }

        function toggleChecklist(catIdx, itemIdx) {
            const key = `c${catIdx}-i${itemIdx}`;
            storage.checklist[key] = !storage.checklist[key];
            localStorage.setItem('hokkaido_checklist_status', JSON.stringify(storage.checklist));
            renderChecklist();
        }

        function updateBudget(val) {
            storage.budget[currentDayIdx] = parseInt(val) || 0;
            localStorage.setItem('hokkaido_budget', JSON.stringify(storage.budget));
            calculateGlobalStats();
            document.getElementById('bottom-value').innerText = `¬• ${storage.budget[currentDayIdx].toLocaleString()}`;
        }

        function calculateGlobalStats() {
            let totalTasks = 0, doneTasks = 0;
            itinerary.forEach((d, dIdx) => {
                d.activities.forEach((_, tIdx) => {
                    totalTasks++;
                    if(storage.completed[`d${dIdx}-t${tIdx}`]) doneTasks++;
                });
            });
            const progress = (doneTasks / totalTasks) * 100;
            const progressBar = document.getElementById('progress-bar');
            if (progressBar) progressBar.style.width = `${progress}%`;
            
            let totalSpend = 0;
            Object.values(storage.budget).forEach(v => totalSpend += v);
            const totalBudgetElem = document.getElementById('total-budget');
            if (totalBudgetElem) totalBudgetElem.innerText = `¬• ${totalSpend.toLocaleString()}`;
        }

        function openMap(query) {
            window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank');
        }

        function shareItinerary() {
            alert("Â∑≤ÁÇ∫ÊÇ®Áî¢ÁîüË°åÁ®ãÊ∏ÖÂñÆÈÄ£ÁµêÔºåÈö®ÊôÇÂèØËàáÂêåË°åÂ•ΩÂèãÂàÜ‰∫´ÔºÅ");
        }

        init();
    </script>
</body>
</html>
